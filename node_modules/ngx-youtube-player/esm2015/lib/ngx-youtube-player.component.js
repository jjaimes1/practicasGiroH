import { __decorate, __metadata } from "tslib";
import { ChangeDetectionStrategy, Component, ElementRef, EventEmitter, Input, Output, Renderer2 } from '@angular/core';
import { YoutubePlayerService, defaultSizes } from './ngx-youtube-player.service';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from './ngx-youtube-player.service';
let YoutubePlayerComponent = class YoutubePlayerComponent {
    constructor(playerService, elementRef, renderer) {
        this.playerService = playerService;
        this.elementRef = elementRef;
        this.renderer = renderer;
        this.videoId = '';
        this.height = defaultSizes.height;
        this.width = defaultSizes.width;
        /**
         * @description sets the protocol by the navigator object
         * if there is no window, it sets a default http protocol
         * unless the protocol is set from outside
         */
        this.protocol = this.getProtocol();
        this.playerVars = {};
        // player created and initialized - sends instance of the player
        this.ready = new EventEmitter();
        // state change: send the YT event with its state
        this.change = new EventEmitter();
    }
    ngAfterContentInit() {
        const htmlId = this.playerService.generateUniqueId();
        const playerSize = { height: this.height, width: this.width };
        const container = this.renderer.selectRootElement('#yt-player-ngx-component');
        this.renderer.setAttribute(container, 'id', htmlId);
        this.playerService.loadPlayerApi({
            protocol: this.protocol
        });
        this.playerService.setupPlayer(htmlId, {
            change: this.change,
            ready: this.ready
        }, playerSize, this.videoId, this.playerVars);
    }
    getProtocol() {
        const hasWindow = window && window.location;
        const protocol = hasWindow
            ? window.location.protocol.replace(':', '')
            : 'http';
        return protocol;
    }
};
YoutubePlayerComponent.ɵfac = function YoutubePlayerComponent_Factory(t) { return new (t || YoutubePlayerComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.YoutubePlayerService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2)); };
YoutubePlayerComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: YoutubePlayerComponent, selectors: [["youtube-player"]], inputs: { videoId: "videoId", height: "height", width: "width", protocol: "protocol", playerVars: "playerVars" }, outputs: { ready: "ready", change: "change" }, decls: 1, vars: 0, consts: [["id", "yt-player-ngx-component"]], template: function YoutubePlayerComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelement(0, "div", 0);
    } }, encapsulation: 2, changeDetection: 0 });
__decorate([
    Input(),
    __metadata("design:type", Object)
], YoutubePlayerComponent.prototype, "videoId", void 0);
__decorate([
    Input(),
    __metadata("design:type", Object)
], YoutubePlayerComponent.prototype, "height", void 0);
__decorate([
    Input(),
    __metadata("design:type", Object)
], YoutubePlayerComponent.prototype, "width", void 0);
__decorate([
    Input(),
    __metadata("design:type", String)
], YoutubePlayerComponent.prototype, "protocol", void 0);
__decorate([
    Input(),
    __metadata("design:type", Object)
], YoutubePlayerComponent.prototype, "playerVars", void 0);
__decorate([
    Output(),
    __metadata("design:type", Object)
], YoutubePlayerComponent.prototype, "ready", void 0);
__decorate([
    Output(),
    __metadata("design:type", Object)
], YoutubePlayerComponent.prototype, "change", void 0);
YoutubePlayerComponent = __decorate([ __metadata("design:paramtypes", [YoutubePlayerService,
        ElementRef,
        Renderer2])
], YoutubePlayerComponent);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(YoutubePlayerComponent, [{
        type: Component,
        args: [{
                changeDetection: ChangeDetectionStrategy.OnPush,
                selector: 'youtube-player',
                template: `
    <div id="yt-player-ngx-component"></div>
  `
            }]
    }], function () { return [{ type: ɵngcc1.YoutubePlayerService }, { type: ɵngcc0.ElementRef }, { type: ɵngcc0.Renderer2 }]; }, { videoId: [{
            type: Input
        }], height: [{
            type: Input
        }], width: [{
            type: Input
        }], protocol: [{
            type: Input
        }], playerVars: [{
            type: Input
        }], ready: [{
            type: Output
        }], change: [{
            type: Output
        }] }); })();
export { YoutubePlayerComponent };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXlvdXR1YmUtcGxheWVyLmNvbXBvbmVudC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvbmd4LXlvdXR1YmUtcGxheWVyL3NyYy9saWIvbmd4LXlvdXR1YmUtcGxheWVyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUVMLHVCQUF1QixFQUN2QixTQUFTLEVBQ1QsVUFBVSxFQUNWLFlBQVksRUFDWixLQUFLLEVBRUwsTUFBTSxFQUNOLFNBQVMsRUFFVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQ0wsb0JBQW9CLEVBQ3BCLFlBQVksRUFDYixNQUFNLDhCQUE4QixDQUFDOzs7QUFTdEMsSUFBYSxzQkFBc0IsR0FBbkMsTUFBYSxzQkFBc0I7QUFBRyxJQWlCcEMsWUFDUyxhQUFtQyxFQUNsQyxVQUFzQixFQUN0QixRQUFtQjtBQUM1QixRQUhRLGtCQUFhLEdBQWIsYUFBYSxDQUFzQjtBQUFDLFFBQ25DLGVBQVUsR0FBVixVQUFVLENBQVk7QUFBQyxRQUN2QixhQUFRLEdBQVIsUUFBUSxDQUFXO0FBQy9CLFFBcEJXLFlBQU8sR0FBRyxFQUFFLENBQUM7QUFDeEIsUUFBVyxXQUFNLEdBQUcsWUFBWSxDQUFDLE1BQU0sQ0FBQztBQUN4QyxRQUFXLFVBQUssR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDO0FBQ3RDLFFBQUU7QUFDRjtBQUNNO0FBQ007QUFFQSxXQURQO0FBQ0wsUUFBVyxhQUFRLEdBQVcsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBQ2pELFFBQVcsZUFBVSxHQUFrQixFQUFFLENBQUM7QUFDMUMsUUFDRSxnRUFBZ0U7QUFDbEUsUUFBWSxVQUFLLEdBQUcsSUFBSSxZQUFZLEVBQWEsQ0FBQztBQUNsRCxRQUFFLGlEQUFpRDtBQUNuRCxRQUFZLFdBQU0sR0FBRyxJQUFJLFlBQVksRUFBa0IsQ0FBQztBQUN4RCxJQUtLLENBQUM7QUFDTixJQUNFLGtCQUFrQjtBQUNwQixRQUFJ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QSxBQUFBLEFBQ0EsQUFJQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBTUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFuREEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBTUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFHQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQWZBLEFBQUEsQUFQQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUVBLEFBQ0EsQUFBQSxBQW1CQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFwQkEsQUFBQSxBQW9EQSxBQXBEQSxBQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQWZ0ZXJDb250ZW50SW5pdCxcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENvbXBvbmVudCxcbiAgRWxlbWVudFJlZixcbiAgRXZlbnRFbWl0dGVyLFxuICBJbnB1dCxcbiAgT25DaGFuZ2VzLFxuICBPdXRwdXQsXG4gIFJlbmRlcmVyMixcbiAgU2ltcGxlQ2hhbmdlc1xufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7XG4gIFlvdXR1YmVQbGF5ZXJTZXJ2aWNlLFxuICBkZWZhdWx0U2l6ZXNcbn0gZnJvbSAnLi9uZ3gteW91dHViZS1wbGF5ZXIuc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgc2VsZWN0b3I6ICd5b3V0dWJlLXBsYXllcicsXG4gIHRlbXBsYXRlOiBgXG4gICAgPGRpdiBpZD1cInl0LXBsYXllci1uZ3gtY29tcG9uZW50XCI+PC9kaXY+XG4gIGBcbn0pXG5leHBvcnQgY2xhc3MgWW91dHViZVBsYXllckNvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyQ29udGVudEluaXQge1xuICBASW5wdXQoKSB2aWRlb0lkID0gJyc7XG4gIEBJbnB1dCgpIGhlaWdodCA9IGRlZmF1bHRTaXplcy5oZWlnaHQ7XG4gIEBJbnB1dCgpIHdpZHRoID0gZGVmYXVsdFNpemVzLndpZHRoO1xuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIHNldHMgdGhlIHByb3RvY29sIGJ5IHRoZSBuYXZpZ2F0b3Igb2JqZWN0XG4gICAqIGlmIHRoZXJlIGlzIG5vIHdpbmRvdywgaXQgc2V0cyBhIGRlZmF1bHQgaHR0cCBwcm90b2NvbFxuICAgKiB1bmxlc3MgdGhlIHByb3RvY29sIGlzIHNldCBmcm9tIG91dHNpZGVcbiAgICovXG4gIEBJbnB1dCgpIHByb3RvY29sOiBzdHJpbmcgPSB0aGlzLmdldFByb3RvY29sKCk7XG4gIEBJbnB1dCgpIHBsYXllclZhcnM6IFlULlBsYXllclZhcnMgPSB7fTtcblxuICAvLyBwbGF5ZXIgY3JlYXRlZCBhbmQgaW5pdGlhbGl6ZWQgLSBzZW5kcyBpbnN0YW5jZSBvZiB0aGUgcGxheWVyXG4gIEBPdXRwdXQoKSByZWFkeSA9IG5ldyBFdmVudEVtaXR0ZXI8WVQuUGxheWVyPigpO1xuICAvLyBzdGF0ZSBjaGFuZ2U6IHNlbmQgdGhlIFlUIGV2ZW50IHdpdGggaXRzIHN0YXRlXG4gIEBPdXRwdXQoKSBjaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPFlULlBsYXllckV2ZW50PigpO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBwbGF5ZXJTZXJ2aWNlOiBZb3V0dWJlUGxheWVyU2VydmljZSxcbiAgICBwcml2YXRlIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXG4gICAgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyXG4gICkge31cblxuICBuZ0FmdGVyQ29udGVudEluaXQoKSB7XG4gICAgY29uc3QgaHRtbElkID0gdGhpcy5wbGF5ZXJTZXJ2aWNlLmdlbmVyYXRlVW5pcXVlSWQoKTtcbiAgICBjb25zdCBwbGF5ZXJTaXplID0geyBoZWlnaHQ6IHRoaXMuaGVpZ2h0LCB3aWR0aDogdGhpcy53aWR0aCB9O1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMucmVuZGVyZXIuc2VsZWN0Um9vdEVsZW1lbnQoXG4gICAgICAnI3l0LXBsYXllci1uZ3gtY29tcG9uZW50J1xuICAgICk7XG4gICAgdGhpcy5yZW5kZXJlci5zZXRBdHRyaWJ1dGUoY29udGFpbmVyLCAnaWQnLCBodG1sSWQpO1xuICAgIHRoaXMucGxheWVyU2VydmljZS5sb2FkUGxheWVyQXBpKHtcbiAgICAgIHByb3RvY29sOiB0aGlzLnByb3RvY29sXG4gICAgfSk7XG4gICAgdGhpcy5wbGF5ZXJTZXJ2aWNlLnNldHVwUGxheWVyKFxuICAgICAgaHRtbElkLFxuICAgICAge1xuICAgICAgICBjaGFuZ2U6IHRoaXMuY2hhbmdlLFxuICAgICAgICByZWFkeTogdGhpcy5yZWFkeVxuICAgICAgfSxcbiAgICAgIHBsYXllclNpemUsXG4gICAgICB0aGlzLnZpZGVvSWQsXG4gICAgICB0aGlzLnBsYXllclZhcnNcbiAgICApO1xuICB9XG5cbiAgZ2V0UHJvdG9jb2woKSB7XG4gICAgY29uc3QgaGFzV2luZG93ID0gd2luZG93ICYmIHdpbmRvdy5sb2NhdGlvbjtcbiAgICBjb25zdCBwcm90b2NvbCA9IGhhc1dpbmRvd1xuICAgICAgPyB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wucmVwbGFjZSgnOicsICcnKVxuICAgICAgOiAnaHR0cCc7XG4gICAgcmV0dXJuIHByb3RvY29sO1xuICB9XG59XG4iXX0=